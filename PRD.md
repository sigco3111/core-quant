---

# Core Quant PRD - MVP 최종 버전

## 1. 제품 개요

**제품명:** **Core Quant**

**제품 목적:** 'Core Quant'는 사용자가 직접 구성하고 관리하는 **Firebase 데이터베이스**와 **야후 파이낸스(Yahoo Finance) 데이터를 활용**하여, 개인 투자자들이 다양한 퀀트 투자 전략을 손쉽게 백테스트하고 그 결과를 직관적으로 시각화하여 보여주는 웹 기반 통합 금융 기술 플랫폼입니다. 이 MVP는 복잡한 코딩 없이도 투자 아이디어를 검증하고, 과거 데이터 기반으로 전략의 유효성을 분석하여 더 나은 투자 결정을 내릴 수 있도록 돕는 데 중점을 둡니다.

**해결하려는 문제점:**
* **높은 퀀트 투자 진입 장벽:** 일반 투자자들은 퀀트 투자를 위한 코딩 지식, 데이터 분석 능력, 시스템 구축 등에 어려움을 겪습니다.
* **투자 전략 검증의 어려움:** 개인 투자자들이 자신의 투자 아이디어를 과거 데이터에 기반하여 효과적으로 검증하기 위한 도구가 부족하며, 결과를 시각적으로 이해하기 어렵습니다.
* **불투명한 전략 성과:** 특정 전략이 과거에 어떤 성과를 냈는지 명확하게 확인하고 분석할 수 있는 도구가 부족합니다.

**제공하는 가치 제안 (MVP):**
* **개인 데이터 소유권 보장:** 사용자가 직접 Firebase DB를 구성하고 인증 정보를 앱에 입력하여 자신의 전략, 백테스트 결과 등 모든 데이터를 직접 관리합니다.
* **코딩 없는 퀀트 투자 시작:** 직관적인 UI를 통해 누구나 쉽게 자신만의 퀀트 전략을 구축하고 백테스트할 수 있습니다.
* **강력한 백테스팅 및 시각화:** 야후 파이낸스에서 제공하는 풍부한 데이터를 기반으로 전략의 과거 성과를 빠르게 확인하고, 다양한 그래프와 지표로 시각화하여 투자 아이디어를 명확하게 검증합니다.
* **다양한 전략 템플릿 제공:** **평균 회귀, 추세 추종, 팩터 투자, 변동성 돌파, VLL, BAA, 올웨더** 등 검증된 퀀트 전략 템플릿을 제공하여 사용자가 쉽게 전략을 시작하고 응용할 수 있습니다.
* **전략 공유 및 협업:** 사용자가 생성한 전략을 **파일로 내보내거나 가져올 수 있으며, 공유 기능을 통해 다른 사용자와 쉽게 교환**하여 협업 및 전략 확산을 촉진합니다.
* **전략 기반 종목 추천 및 이메일 알림:** 사용자의 전략 조건에 부합하는 종목을 추천하고, 설정된 정보 및 전략 알림을 이메일로 받아볼 수 있도록 지원하여 편리성을 높입니다.
* **직관적인 종목 탐색:** 티커뿐만 아니라 종목명으로도 손쉽게 종목을 검색하고, 핵심 정보를 빠르게 파악하며 세부 정보를 탐색할 수 있습니다.

---

## 2. 대상 사용자

* **초보 퀀트 투자자:** 퀀트 투자에 관심은 있지만 코딩 지식이 부족하여 시작에 어려움을 겪는 사용자. 이들은 직관적인 인터페이스와 **제공되는 전략 템플릿**을 통해 퀀트 투자를 경험하고 싶어 합니다.
* **기존 개인 투자자 (주식/ETF 투자 경험자):** 주식이나 ETF 투자 경험은 있지만, 더 체계적이고 데이터 기반의 투자 방법을 모색하는 사용자. 이들은 자신의 투자 아이디어를 데이터 기반으로 검증하고, 전략의 과거 성과를 심층적으로 분석하고자 합니다.
* **교육 목적의 사용자:** 퀀트 투자 전략의 원리와 백테스팅 과정을 이해하고 학습하고자 하는 학생, 강사 등.
* **전략을 공유하거나 다른 사람의 전략을 활용하고자 하는 사용자.**

---

## 3. 사용자 흐름 (MVP 버전)

**주요 사용자 시나리오: '사용자 맞춤형 DB 설정 및 종목 검색 후 이동평균선 기반 백테스트 및 종목 추천'**

1.  **초기 접속 및 설정 페이지 진입:**
    * 사용자는 웹앱에 접속합니다.
    * 서비스 이용 전 **'설정' 페이지로 이동하도록 안내**하거나, 초기 접속 시 설정 페이지가 먼저 나타나도록 합니다.
2.  **Firebase DB 인증 정보 및 이메일 주소 입력:**
    * 설정 페이지에서 다음 입력 필드를 확인합니다:
        * `FIREBASE_API_KEY`, `FIREBASE_AUTH_DOMAIN`, `FIREBASE_PROJECT_ID`, `FIREBASE_STORAGE_BUCKET` (선택적), `FIREBASE_MESSAGING_SENDER_ID` (선택적), `FIREBASE_APP_ID`
        * **알림 수신용 이메일 주소**
    * 사용자는 **별도로 생성한 Firebase 프로젝트의 인증 정보**와 **알림을 받아볼 이메일 주소**를 각 필드에 입력합니다.
    * **'설정 저장 및 연결' 버튼을 클릭**하여 유효성을 검증하고 Firebase에 연결을 시도합니다.
    * **성공 시:** 설정 정보가 브라우저의 **로컬 스토리지에 암호화되어 저장**되고 대시보드 화면으로 진입합니다.
    * **실패 시:** 오류 메시지를 표시하고 재입력을 요청합니다.
3.  **종목 검색 및 탐색:**
    * 사용자는 **'종목 검색' 메뉴**로 이동합니다.
    * 검색창에 **티커 또는 종목명(한글/영어)**을 입력하고 검색합니다.
    * 검색 결과는 **카드 형식**으로 나타나며, 각 카드에는 종목명, 티커, 현재가, 전일 대비 변동률 등 **간단한 핵심 정보**가 표시됩니다.
    * 원하는 종목 카드를 클릭하면, 해당 종목의 현재 주가 차트, 주요 재무 지표, 기업 개요 등 **세부 정보 화면**으로 이동하여 상세 내용을 탐색합니다.
4.  **새 전략 생성 (템플릿 활용, 직접 생성, 가져오기):**
    * 사용자는 좌측 메뉴에서 **'새 전략 생성' 버튼을 클릭**합니다.
    * 전략 생성 페이지에서 다음 세 가지 옵션 중 하나를 선택합니다:
        * **'템플릿에서 시작':** **평균 회귀, 추세 추종, 팩터 투자, 변동성 돌파, VLL, BAA, 올웨더 등 제공되는 다양한 전략 템플릿 목록**을 보여주고, 사용자가 원하는 템플릿을 선택합니다.
        * **'새로운 전략 만들기':** 처음부터 직접 전략을 구성합니다.
        * **'전략 파일 가져오기':** 사용자가 가지고 있는 `.json` 또는 `.corequant` 등의 전략 파일을 업로드하여 새로운 전략으로 가져옵니다.
    * 선택한 템플릿 또는 직접 만들거나 가져온 전략에 대한 이름, 설명, 투자 대상 종목 티커(야후 파이낸스 지원 종목 한정) 등을 입력합니다.
5.  **전략 조건 설정 (다양한 지표 및 기간 설정):**
    * 선택한 **템플릿은 기본 조건이 미리 설정**되어 나타나며, 사용자는 이를 그대로 사용하거나 **세부 조건(지표 파라미터, 조건 발생 주기, 손절/익절 등)을 수정**할 수 있습니다.
    * 직접 전략을 만드는 경우, **가능한 많은 기술 지표(예: 이동평균선(MA), RSI, MACD, 볼린저밴드, 스토캐스틱, ATR 등) 중에서 선택**하고, 각 지표의 파라미터를 설정합니다.
    * **매수 조건과 매도 조건을 각각 설정**하며, **조건 발생 주기(매일, 매주, 매달, 매분기, 매년)**를 선택할 수 있도록 합니다. (예: "매주 마감 시 5일 이동평균선이 20일 이동평균선 상향 돌파 시 매수")
    * **단순 손절/익절 비율(%)을 설정**합니다.
6.  **백테스트 실행:**
    * 전략 조건 설정 완료 후 **'백테스트 실행' 버튼을 클릭**합니다.
    * 백테스트 기간을 설정하고, 초기 투자 금액을 입력합니다.
    * 시스템은 야후 파이낸스 API에서 과거 종목 데이터를 가져와 설정된 조건에 따라 백테스트를 수행합니다.
    * **백테스트 결과를 그래프(수익률 곡선, 매매 시점 표시)와 표(총 수익률, MDD, 총 거래 횟수, 승률 등 핵심 지표)** 형태로 직관적으로 시각화하여 제공하며, 이 결과는 **사용자 Firebase DB에 저장**됩니다.
7.  **백테스트 결과 확인 및 비교:**
    * 사용자는 '내 백테스트' 페이지에서 과거 실행했던 백테스트 결과를 조회하고, 여러 백테스트 결과를 한눈에 비교할 수 있습니다.
8.  **전략 내보내기/공유:**
    * '내 전략' 목록에서 원하는 전략을 선택한 후 **'내보내기' 버튼**을 클릭하여 해당 전략의 설정 값을 `.json` 또는 `.corequant` 파일 형식으로 다운로드합니다.
    * **'공유' 버튼**을 클릭하면, 해당 전략의 **고유한 공유 링크를 생성**하고 복사할 수 있도록 합니다. (이 링크를 통해 다른 사용자가 해당 전략을 앱으로 가져올 수 있음)
9.  **종목 추천 및 이메일 알림 수신:**
    * 사용자는 **'종목 추천' 메뉴**에서 자신이 설정한 전략을 선택하고, **탐색할 종목군(예: KOSPI 200 구성 종목, S&P 500 구성 종목)을 지정**합니다.
    * 시스템은 지정된 종목군 내에서 **사용자 전략의 매수/매도 조건에 부합하는 종목을 찾아 리스트업**하여 보여줍니다.
    * 매일 (또는 설정된 주기마다) **사용자 설정 이메일 주소로 해당 전략의 매수/매도 신호 발생 종목, 백테스트 결과 요약, 기타 관련 정보를 포함한 알림 메일을 수신**합니다.

---

## 4. 기능 요구사항 (MVP)

| 기능 구분 | 기능명 | 상세 설명 | 개발 난이도 | 우선순위 |
| :-------- | :----- | :-------- | :---------- | :------- |
| **핵심 기능** | **초기 설정 및 DB 키/이메일 입력** | 앱 접속 시 또는 설정 메뉴에서 **사용자가 직접 생성한 Firebase 프로젝트의 인증 정보(`FIREBASE_API_KEY` 등 6가지)와 알림 수신용 이메일 주소를 입력**하고 저장하는 UI. 입력된 정보는 브라우저의 **로컬 스토리지에 암호화하여 저장**됨. | 보통 | 상 |
| | **대시보드** | 사용자 Firebase DB에 저장된 데이터를 기반으로, 최근 백테스트 결과 요약, 저장된 전략 목록 등을 보여주는 화면. | 보통 | 상 |
| | **종목 검색 및 간략 정보 표시** | **티커뿐만 아니라 종목명(한글/영어)**으로도 종목을 검색할 수 있는 기능. 검색 결과는 **카드 형식**으로 종목명, 티커, 현재가, 전일 대비 변동률 등 **핵심 정보**를 표시. | 보통 | 상 |
| | **종목 세부 정보 화면** | 검색된 종목 카드를 클릭하면 이동하는 화면으로, 해당 종목의 **현재 주가 차트, 주요 재무 지표(간단한 정보), 기업 개요 등 상세 정보**를 보여줌. (야후 파이낸스 데이터 기반) | 보통 | 상 |
| | **전략 생성 및 관리** | 사용자가 직관적인 UI로 **새로운 전략을 생성, 수정, 삭제**할 수 있는 기능. 전략 정보는 **사용자 Firebase DB에 저장**됨. **단일 종목/ETF**를 대상으로 함. | 보통 | 상 |
| | **다양한 전략 템플릿 제공** | **평균 회귀, 추세 추종, 팩터 투자, 변동성 돌파, VLL, BAA, 올웨더 등 가능한 많은 퀀트 전략 템플릿**을 제공. 사용자는 템플릿을 선택하여 기본 설정을 가져오고, 이를 수정하여 자신만의 전략으로 저장 가능. | 어려움 | 상 |
| | **전략 내보내기 (Export)** | 사용자가 생성한 전략의 설정 값을 `.json` 또는 `.corequant` 파일 형식으로 **다운로드할 수 있는 기능**. | 쉬움 | 상 |
| | **전략 가져오기 (Import)** | `.json` 또는 `.corequant` 형식의 전략 파일을 **업로드하여 새로운 전략으로 앱에 불러올 수 있는 기능**. | 보통 | 상 |
| | **전략 공유 (Share Link)** | 선택된 전략의 고유한 **공유 링크를 생성**하고 복사할 수 있는 기능. (링크를 통해 다른 사용자가 해당 전략을 앱으로 가져올 수 있도록 연결) | 보통 | 상 |
| | **다양한 전략 조건 설정** | 매수/매도 조건을 설정할 수 있는 UI. **이동평균선(MA), RSI, MACD, 볼린저밴드, 스토캐스틱, ATR 등 가능한 많은 기술 지표 지원**. 각 지표의 파라미터 및 조건을 설정. **조건 발생 주기(매일, 매주, 매달, 매분기, 매년) 설정 기능 포함**. **단순 손절/익절 비율(%) 설정** 포함. | 어려움 | 상 |
| | **백테스팅 엔진 (단일 자산)** | 설정된 전략 조건과 **야후 파이낸스에서 조회한 과거 데이터**를 기반으로 백테스팅을 수행. 백테스트 데이터는 야후 파이낸스 API에서 직접 조회하거나, 필요시 백엔드 프록시를 통해 조회. **핵심 성과 지표(총 수익률, MDD, 총 거래 횟수, 승률, 평균 손익률 등)를 산출**. | 어려움 | 상 |
| | **야후 파이낸스 데이터 연동** | 야후 파이낸스 API를 통해 **한국 및 미국 주식/ETF의 과거 일봉(OHLCV)** 데이터를 가져와 전략 생성 및 백테스팅, 종목 정보 표시에 활용. | 보통 | 상 |
| | **백테스트 결과 시각화 및 저장** | 백테스팅 결과를 **수익률 곡선 그래프, 매매 시점 표시, 핵심 지표 요약 테이블** 형태로 직관적으로 시각화하여 제공. 이 결과는 **사용자 Firebase DB에 저장**됨. | 보통 | 상 |
| | **백테스트 결과 조회 및 비교** | 사용자 Firebase DB에 저장된 과거 백테스트 결과를 목록 형태로 조회하고, 선택한 결과를 불러와 상세 확인 및 **최대 2~3개 전략의 수익률 곡선을 비교**할 수 있는 기능. | 보통 | 상 |
| | **전략 기반 종목 추천** | 사용자가 저장한 전략 중 하나를 선택하고, 특정 종목군(예: KOSPI 200 구성 종목, S&P 500 구성 종목)을 지정하면, **해당 종목군 내에서 전략의 매수/매도 조건에 부합하는 종목 리스트를 제공**. (추천 목록은 야후 파이낸스 데이터 기반, **별도 백엔드/클라우드 함수 필요**) | 어려움 | 상 |
| | **이메일 알림 (전략 신호 및 요약)** | 사용자가 설정한 이메일 주소로 **매일 (또는 설정된 주기마다) 전략별 매수/매도 신호 발생 종목, 최근 백테스트 결과 요약, 기타 관련 정보를 포함한 알림 메일을 발송**하는 기능. **(별도 백엔드/클라우드 함수 필요)** | 어려움 | 상 |
| **부가 기능** | **DB 연결 상태 표시** | Firebase DB의 현재 연결 상태를 사용자에게 명확히 표시하고, 연결 끊김 시 재연결 시도 또는 안내. | 쉬움 | 중 |
| | **사용자 가이드/FAQ** | Firebase 프로젝트 생성 및 인증 정보 입력 방법, 야후 파이낸스 티커 찾는 방법, 전략 설정 방법 등 서비스 이용을 위한 필수 가이드 제공. | 쉬움 | 중 |

---

## 5. 추천 기술 스택 (MVP)

* **프론트엔드 (Frontend):**
    * **언어:** TypeScript
    * **프레임워크:** React (또는 Vue.js)
    * **UI 라이브러리:** Chakra UI, Vuetify, 또는 Ant Design
    * **상태 관리:** Zustand (React) 또는 Pinia (Vue.js)
    * **로컬 데이터 저장:** **Local Storage** (암호화된 Firebase 인증 정보 저장)
    * **차트 라이브러리:** Chart.js, Recharts, ECharts 등 백테스트 결과 시각화에 적합한 라이브러리
* **백엔드 (Backend) / 서버리스 (Serverless):**
    * **언어:** Python (선호) 또는 Node.js
    * **프레임워크:** **Vercel Serverless Functions** (야후 파이낸스 API 호출 프록시, 가벼운 백테스트 데이터 조회), **Firebase Cloud Functions (이메일 알림 발송, 종목 추천 로직, 주기적 스케줄링, 전략 공유 링크 처리)**
        * **백테스팅 로직:** 연산량이 많으므로, **Vercel Serverless Functions의 실행 시간 제한(10초)을 고려**하여 백테스팅 로직을 **클라이언트 측(웹 어셈블리 등)에서 대부분 처리**하거나, **Firebase Cloud Functions에서 백그라운드 작업으로 처리 후 결과를 DB에 저장**하는 방식을 고려해야 합니다. MVP에서는 후자(클라우드 함수 또는 클라이언트 처리)를 우선 고려합니다.
    * **데이터 연동:** Python의 `yfinance` 라이브러리 또는 Node.js의 관련 라이브러리 활용.
    * **데이터 분석/퀀트 라이브러리:** Pandas, NumPy, **TA-Lib (다양한 기술 지표 계산용)** (Python)
    * **이메일 발송:** SendGrid, Mailgun 등 이메일 API 서비스 연동 (Firebase Cloud Functions에서 호출)
* **데이터베이스 (Database):**
    * **Firebase Firestore:** 전략 설정, 백테스트 결과, 이메일 주소, **전략 템플릿 정보, 공유 전략의 메타데이터** 등 **사용자 데이터 저장**.
    * **Firebase Realtime Database (선택적):** 필요시 실시간 알림 등에 활용.

---

## 6. 보안 강화 상세 (MVP)

사용자에게 Firebase DB를 직접 구성하도록 하는 방향에 맞춰, 앱 내에서 입력되는 민감 정보의 보안을 최우선으로 고려합니다.

* **Firebase 인증 정보 저장:**
    * 사용자가 입력하는 `FIREBASE_API_KEY`, `FIREBASE_PROJECT_ID` 등 Firebase 인증 정보는 **클라이언트 측 브라우저의 `Local Storage`에 암호화하여 저장**합니다.
    * **저장 시에는 반드시 클라이언트 측에서 강력한 암호화 알고리즘(예: AES-GCM)을 사용하여 암호화해야 합니다.** 암호화 키는 사용자 세션마다 생성하거나, 사용자로부터 별도의 비밀번호를 받아 파생시키는 방식을 고려할 수 있습니다. **(Local Storage의 XSS 취약성 때문에 암호화가 매우 중요하며, 민감 정보 보호에 더 집중해야 합니다.)**
* **백엔드/서버리스 프록시 활용:**
    * 야후 파이낸스 API는 클라이언트에서 직접 호출할 수도 있지만, API 키 관리 및 Rate Limit 우회, 또는 CORS(Cross-Origin Resource Sharing) 문제 해결을 위해 **Vercel Serverless Functions와 같은 백엔드 프록시를 통해 호출**하는 것을 권장합니다.
    * **이메일 발송, 종목 추천, 그리고 전략 공유 링크 처리와 같은 주기적인/서버 측 로직은 Firebase Cloud Functions를 통해 구현되어야 합니다.** 이는 사용자의 로컬 환경에 의존하지 않고 안정적으로 동작해야 하기 때문입니다. 이메일 주소 등 개인 정보는 사용자 Firebase DB에 저장되므로, Cloud Functions는 해당 DB에 접근하여 정보를 가져와 사용합니다.
* **Firebase 보안 규칙(Security Rules) 설정 가이드라인 제공:**
    * 사용자에게 Firebase DB를 직접 구성하도록 하므로, **Core Quant는 사용자가 자신의 Firebase 프로젝트에 적절한 보안 규칙을 설정하도록 명확한 가이드라인을 제공**해야 합니다.
    * 예시: `allow read, write: if request.auth.uid == resource.data.userId;`와 같이 해당 사용자만이 자신의 데이터에 접근 가능하도록 하는 규칙을 설명합니다. (사용자가 Firebase 인증 기능을 직접 사용하지 않더라도, 앱 내에서 Firebase 익명 인증(`signInAnonymously()`)을 통해 사용자별 UID를 부여하고, 이 UID를 데이터 저장 시 활용하여 보안 규칙을 적용할 수 있습니다.)
    * **전략 공유 기능 시 고려사항:** 공유된 전략의 메타데이터(예: 공유 링크 ID, 전략 제목 등)는 모든 사용자가 읽을 수 있도록 Public으로 설정해야 할 수 있습니다. 하지만 실제 전략 상세 내용은 해당 전략을 가져간 사용자의 DB에만 저장되므로, 민감 정보 유출 위험은 적습니다.
* **서비스 운영자의 정보 접근 최소화:**
    * 이 방식은 Core Quant 서비스 운영자가 사용자의 Firebase DB 데이터나 개인 정보(이메일 주소 포함)에 직접 접근할 수 없도록 설계하여, **개인정보 보호 측면에서 사용자 신뢰도를 높일 수 있습니다.**

---

**참고사항:**

* **별도 회원가입/로그인 없음:** 사용자는 Firebase 인증 정보를 직접 입력하여 서비스를 이용하며, 별도의 계정 관리(회원가입, 비밀번호 찾기 등) 기능은 없습니다.
* **서비스 유료화 없음:** MVP 단계에서는 서비스 이용료를 부과하지 않습니다.
* **초점:** MVP는 **'설정 -> 종목 탐색 -> 전략 선택(템플릿 또는 직접 생성/가져오기) -> 백테스트 -> 결과 시각화 -> 이메일 알림 및 종목 추천 -> 전략 내보내기/공유'** 의 핵심 플로우를 끊김 없이 제공하는 데 집중합니다.
* **확장성:** 추후 고도화를 위해 각 기능은 모듈화하여 설계하는 것을 고려합니다.